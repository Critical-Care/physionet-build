<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  {% if project.resource_type == 0 %}{# 0: Data #}
  "@type": "Dataset",
  {% elif project.resource_type == 1 %}{# 1: Software #}
  "@type": "SoftwareSourceCode",
  {% elif project.resource_type == 2 %}{# 2: Challenge #}
  "@type": "Article",
  {% elif project.resource_type == 3 %}{# 3: Model #}
  "@type": "Dataset",
  {% else %}{# >3: treat as data}
  "@type": "Dataset",
  {% endif %}
  "name": "{{ project.title|escapejs }}",
  "description": "{{ project.abstract|truncatechars_html:5000|striptags|escapejs }}",
  "version": "{{ project.version|escapejs }}",
  "license": "{{ project.license|escapejs }}",
  "datePublished" : "{{ project.publish_datetime|date|escapejs }}",
  "url": "https://{{ current_site }}{% url 'published_project_latest' project.slug|escapejs %}",
  {% if project.doi %}
  "identifier": "https://doi.org/{{ project.doi|escapejs }}",
  {% endif %}
  "creator": [
  {% for author in authors %}
    {
      "@type": "Person",
      "givenName": "{{ author.first_names|escapejs }}",
      "familyName": "{{ author.last_name|escapejs }}",
      "name": "{{ author.first_names|escapejs }} {{ author.last_name|escapejs }}"
    }{% if forloop.counter < authors|length %},{% endif %}
  {% endfor %}
    ],
  "includedInDataCatalog":{
     "@type": "DataCatalog",
     "name": "physionet.org"
  },
  "distribution": [
    {
      "@type": "DataDownload",
      "contentUrl": "https://{{ current_site }}{% url 'published_project_latest' project.slug|escapejs %}#files"
    }
  ]
}
</script> 